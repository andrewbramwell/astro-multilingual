---
// src/components/Reviews/Review3.astro
import { t } from "i18n:astro";
import client from "@data/client.json";

// Create reviews array for easy mapping
const reviews = [
  {
    text: t("home:reviews.review1.text"),
    name: t("home:reviews.review1.name")
  },
  {
    text: t("home:reviews.review2.text"),
    name: t("home:reviews.review2.name")
  },
  {
    text: t("home:reviews.review3.text"),
    name: t("home:reviews.review3.name")
  }
];
---

<!-- ============================================ -->
<!--                  Reviews                     -->
<!-- ============================================ -->

<section id="reviews-567">
    <div class="cs-container">
        <div class="cs-content">
            <span class="cs-topper">{t("home:reviews.topper")}</span>
            <h2 class="cs-title">{t("home:reviews.title")}</h2>
            <p class="cs-text">
                {t("home:reviews.description")}
            </p>
        </div>
        <ul class="cs-card-group">
            {reviews.map((review) => (
                <li class="cs-item">
                    <!--Star Rating-->
                    <img class="cs-stars" aria-hidden="true" src="https://csimg.nyc3.cdn.digitaloceanspaces.com/Reviews/stars3.svg" decoding="async" alt="5 stars" width="189" height="24" />
                    <p class="cs-item-text">
                        {review.text}
                    </p>
                    <div class="cs-flex-group">
                        <picture class="cs-picture">
                            <img class="cs-profile" src="https://csimg.nyc3.cdn.digitaloceanspaces.com/Reviews/profile2.jpg" decoding="async" alt="profile" width="50" height="50" aria-hidden="true" />
                        </picture>
                        <span class="cs-name">
                            {review.name}
                        </span>
                    </div>
                </li>
            ))}
        </ul>
        <a href={client.leaveReview}  class="cs-button-solid">{t("home:reviews.cta")}</a>
    </div>
</section>

<style lang="less">

/*-- -------------------------- -->
<---          Reviews           -->
<--- -------------------------- -*/

/* Mobile - 360px */
@media only screen and (min-width: 0rem) {
    #reviews-567 {
        padding: var(--sectionPadding);

        .cs-container {
            width: 100%;
            /* changes to 1280px at tablet */
            max-width: (550/16rem);
            margin: auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            /* 48px - 64px */
            gap: clamp(3rem, 6vw, 4rem);
        }

        .cs-content {
            /* set text align to left if content needs to be left aligned */
            text-align: center;
            width: 100%;

            display: flex;
            flex-direction: column;
            /* centers content horizontally, set to flex-start to left align */
            align-items: center;
        }

        .cs-card-group {
            width: 100%;
            padding: 0;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            /* 16px - 20px */
            gap: clamp(1rem, 2.5vw, 1.15rem);
        }

        .cs-item {
            list-style: none;
            width: 100%;
            max-width: (630/16rem);
            /* 32px - 60px top & bottom */
            /* 16px - 48px left & right */
            padding: clamp(2rem, 6.15vw, 3.75rem) clamp(1rem, 4.15vw, 3rem);
            background-color: var(--sectionColor);
            /* prevents padding from adding to height and width */
            box-sizing: border-box;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            flex-direction: column;
            position: relative;
            .card-radius(lg);
        }

        .cs-stars {
            /* 169px - 189px */
            width: clamp(10.5625rem, 20vw, 11.8125rem);
            height: auto;
            /* 20px - 24px */
            margin-bottom: clamp(1.25rem, 3vw, 1.5rem);
            display: block;
        }

        .cs-item-text {
            /* 14px - 16px */
            font-size: clamp(0.875rem, 1.5vw, 1rem);
            line-height: 1.5em;
            margin: 0;
            /* 40px - 64px */
            margin-bottom: clamp(2.5rem, 8vw, 4rem);
            color: var(--bodyTextColor);
        }

        .cs-flex-group {
            /* in case one card has more text than the other, this pushes up against the review text so the name and title are always at the bottom. Only works if parent is a flexbox */
            margin-top: auto;
            display: flex;
            justify-content: flex-start;
            align-items: center;
            gap: (20/16rem);
        }

        .cs-profile {
            width: (80/16rem);
            height: (80/16rem);
            border-radius: 50%;
            /* clips image corners to make circle */
            overflow: hidden;
            position: relative;
            display: block;

            img {
                position: absolute;
                top: 0;
                left: 0;
                height: 100%;
                width: 100%;
                /* makes the image behave like a background image */
                object-fit: cover;
            }
        }

        .cs-name {
            /* 16px - 20px */
            font-size: clamp(1rem, 2vw, 1.25rem);
            line-height: 1.5em;
            font-weight: 700;
            margin: 0 0 (8/16rem) 0;
            color: var(--headerColor);
            display: block;
        }
    }
}

/* Tablet - 768px */
@media only screen and (min-width: 48rem) {
    #reviews-567 {
        .cs-container {
            max-width: (1280/16rem);
        }

        .cs-card-group {
            flex-direction: row;
            justify-content: space-between;
            align-items: stretch;
            flex-wrap: wrap;
        }

        .cs-item {
            width: clamp(48.5%, 46.5vw, 49.5%);
            &:last-of-type {
                width: 100%;
                max-width: 100%;
                align-items: center;

                .cs-item-text {
                    text-align: center;
                    max-width: (550/16rem);
                }
            }
        }
    }
}

/* Desktop - 1200px */
@media only screen and (min-width: 75rem) {
    #reviews-567 {
        .cs-card-group {
            flex-wrap: nowrap;
        }

        .cs-item {
            width: 100%;
            align-items: flex-start;
            &:last-of-type {
                align-items: flex-start;

                .cs-item-text {
                    text-align: left;
                }
            }
        }
    }
}

/* Dark Mode */
@media only screen and (min-width: 0rem) {
    body.dark-mode {
        #reviews-567 {
            background-color: rgba(0, 0, 0, .3);
            .cs-title,
            .cs-text,
            .cs-item-text,
            .cs-name,
            .cs-job {
                color: var(--bodyTextColorWhite);
            }

            .cs-text {
                opacity: 0.8;
            }

            .cs-item {
                background-color: var(--accent);
            }
        }
    }
}
                                                                     
</style>
                                